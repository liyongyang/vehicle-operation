webpackJsonp([0],{"6T85":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),n=a.n(o),s=a("GAoI"),i={props:{vehicle_id:String},components:{checkLog:s.default},inject:["reload"],data:function(){return{form:{vehicleId:"",day:"",operator:"",block:"0",info:[]},drawer:!1,block:0,level:!0,options:[],rules:{operator:[{required:!0,message:"请输入填表人姓名",trigger:"blur"}],day:[{type:"string",required:!0,message:"请选择日期",trigger:"change"}]}}},computed:{},watch:{vehicle_id:function(){this.form.vehicleId=this.vehicle_id},form:function(){return this.form}},methods:{menuList:function(){var t=this;this.axios.get("/api/inspection-form/menu-list").then(function(e){t.options=e.datas;for(var a=0;a<t.options.static.length;a++)t.options.static[a].status="OK";for(var o=0;o<t.options.dynamic.length;o++)t.options.dynamic[o].status="OK"}).catch(function(e){t.$message({message:e,type:"error"})})},onSubmit1:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return a.$message.error("请检查信息是否填写完整"),!1;for(var o=0;o<a.options.static.length;o++)1==a.options.static[o].status&&(a.form.info.push(a.options.static[o]),e.level=!1);for(var n=0;n<a.options.dynamic.length;n++)1==a.options.dynamic[n].status&&(a.form.info.push(a.options.dynamic[n]),e.level=!1);e.drawer=!0})},handleClose:function(t){var e=this;this.$confirm("重新填写？").then(function(a){t(e.form.info=[])}).catch(function(t){})},handleSelectionChange:function(t){for(var e=0;e<t.length;e++)t[e].level="1"},onSubmit:function(t){var e=this;e.axios.post("/api/inspection-form/day",{vehicleId:e.form.vehicleId,day:e.form.day,operator:e.form.operator,block:e.form.block,info:e.form.info},{useLoading:!0}).then(function(t){console.log(t),n()(e.$data,e.$options.data()),e.menuList(),e.$message({message:"提交成功",type:"success"})}).catch(function(t){e.$message({message:t,type:"error"})})}},created:function(){},mounted:function(){this.menuList()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check-form"},[a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:this.vehicle_id,expression:"this.vehicle_id"}],ref:"form",staticClass:"transition-box",attrs:{model:t.form,rules:t.rules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"填表人",prop:"operator"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.form.operator,callback:function(e){t.$set(t.form,"operator",e)},expression:"form.operator"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出车日期",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"day"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy.MM.dd","value-format":"yyyy.MM.dd"},model:{value:t.form.day,callback:function(e){t.$set(t.form,"day",e)},expression:"form.day"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"top-item"},[a("div",{staticClass:"opitem"},[a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-edit"}),t._v("静态检查项目")]),t._v(" "),t._l(this.options.static,function(e){return a("el-row",{key:e.index,attrs:{index:e.index}},[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},domProps:{textContent:t._s(e.name)},slot:"label"}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("span",{attrs:{slot:"content"},domProps:{textContent:t._s(e.description)},slot:"content"}),t._v(" "),a("el-select",{model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}},[a("el-option",{attrs:{label:"OK",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"有问题",value:"1"}})],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],attrs:{placeholder:"填写详细信息"},model:{value:e.comment,callback:function(a){t.$set(e,"comment",a)},expression:"item.comment"}})],1)],1)})],2),t._v(" "),a("div",{staticClass:"opitem"},[a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-edit"}),t._v("动态检查项目")]),t._v(" "),t._l(this.options.dynamic,function(e){return a("el-row",{key:e.index,attrs:{index:e.index}},[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},domProps:{textContent:t._s(e.name)},slot:"label"}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("span",{attrs:{slot:"content"},domProps:{textContent:t._s(e.description)},slot:"content"}),t._v(" "),a("el-select",{model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}},[a("el-option",{attrs:{label:"OK",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"有问题",value:"1"}})],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],attrs:{placeholder:"填写详细信息"},model:{value:e.comment,callback:function(a){t.$set(e,"comment",a)},expression:"item.comment"}})],1)],1)})],2)]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.onSubmit1("form")}}},[t._v(" 确 定 ")])],1)],1)],1),t._v(" "),a("el-drawer",{staticStyle:{"text-align":"center"},attrs:{visible:t.drawer,"with-header":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"drawerform"},[a("el-col",[a("el-radio",{attrs:{border:"",label:"0"},model:{value:t.form.block,callback:function(e){t.$set(t.form,"block",e)},expression:"form.block"}},[t._v("未影响当天正常测试")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"1",disabled:this.level},model:{value:t.form.block,callback:function(e){t.$set(t.form,"block",e)},expression:"form.block"}},[t._v("有影响当天正常测试")])],1),t._v(" "),a("el-col",[a("el-radio-group",{attrs:{fill:"409EFF"},model:{value:t.block,callback:function(e){t.block=e},expression:"block"}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("无需上报")]),t._v(" "),a("el-radio-button",{attrs:{disabled:this.level,label:"1"}},[t._v("上报车辆工程部门")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==this.block,expression:"this.block == 1"}]},[a("el-alert",{attrs:{title:"勾选项将提交给车辆工程部尽快处理",type:"error",effect:"dark"}}),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.form.info,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"检查项",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"comment",label:"故障说明"}})],1)],1),t._v(" "),a("el-button",{staticStyle:{margin:"10px auto"},attrs:{type:"success",round:""},on:{click:function(e){return t.onSubmit(t.form)}}},[t._v("SUBMIT")])],1)]),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!this.vehicle_id,expression:"!this.vehicle_id"}],attrs:{gutter:12}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 请先选择车辆再填写日常检查表喔~\n      ")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("Ymp6")},"data-v-70b685b8",null);e.default=l.exports},DOwD:function(t,e){},GAoI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkLog"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,height:"1200","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"created_at",label:"日期",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"vehicle_id",label:"车辆",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(t._s(e.row.vehicle_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"提交人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{effect:"dark"}},[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"异常信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.info,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"检查项"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name)+":")]),t._v(" "),a("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(e.row.comment))])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small",round:""},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("处理中 "),a("i",{staticClass:"el-icon-loading"})])]}}])})],1)],1)},staticRenderFns:[]};var n=a("VU/8")({components:{},data:function(){return{tableData:[]}},computed:{},watch:{},methods:{getLIst:function(){var t=this;this.axios.get("/api/inspection-form/list",{},{useLoading:!0}).then(function(e){t.tableData=e.datas}).catch(function(e){t.$message({message:e,type:"error"})})},tableRowClassName:function(t){t.row;var e=t.rowIndex;return 0===e?"warning-row":1===e?"success-row":""},handleClick:function(t){this.$message({message:"开发中...",type:"error"})}},created:function(){},mounted:function(){this.getLIst()}},o,!1,function(t){a("yaEU")},"data-v-451f0bba",null);e.default=n.exports},X0dJ:function(t,e){},Ymp6:function(t,e){},gGY1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("niAN"),n={components:{},data:function(){return{activeNames:["1"],dailyData:[]}},computed:{},watch:{dailyData:function(){return this.dailyData}},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""}},created:function(){},mounted:function(){var t=this;o.default.$on("dailyData",function(e){t.dailyData=e})}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dailyMsg container-fluid"},[""==t.dailyData?a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-loading"}),t._v(" 选择你想查看的车辆数据. . .")]):a("el-carousel",{attrs:{interval:8e3,height:"850px"}},t._l(t.dailyData,function(e){return a("el-carousel-item",{key:e.id,staticClass:"box-card",attrs:{index:e.id}},t._l(e,function(e,o){return a("el-card",{key:e.id,attrs:{index:e.id,id:"cardbox"}},[a("h4",{staticClass:"text-top",domProps:{textContent:t._s(o)}}),t._v(" "),a("h2",{staticClass:"text-val",domProps:{textContent:t._s(e)}})])}),1)}),1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(t){a("DOwD")},"data-v-5bbe6cae",null);e.default=i.exports},niAN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new(a("7+uW").default);e.default=o},yaEU:function(t,e){},zTuE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("niAN"),n=a("XLwt"),s=a.n(n),i={components:{},name:"echarts",data:function(){return{isShow:!1,activeName:"week",park_id:"",vehicle_id:"",allData:[],oneData:[],dayData:[],total_running_time:[],total_running_length:[],total_jira_commit_counts:[],total_take_over_counts:[],total_emergency_stop_counts:[],total_take_over_duration:[],total_emergency_stop_duration:[],total_fault_counts:[],total_accident_counts:[]}},computed:{},watch:{allData:function(t){this.dayData=[],this.drawPie1("myChart1")}},methods:{isdisply:function(){this.isShow=!0},drawPie1:function(t){this.mychart1=s.a.init(document.getElementById("myChart1")),this.mychart1.setOption({title:"",grid:{left:70,top:50,right:60,bottom:30},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:{orient:"horizontal",left:500,top:0,textStyle:{color:"#000000"},data:["运营时间","运营里程","接管次数","急停次数","接管时间","急停时间"]},xAxis:{data:this.dayData},yAxis:{},toolbox:{show:!0,feature:{dataZoom:{realtime:!1,yAxisIndex:"none"},restore:{}}},dataZoom:[{type:"inside"},{type:"slider"}],series:[{name:"运营时间",type:"line",fontSize:28,borderWidth:1,color:"#3300CC",data:this.total_running_time,markLine:{data:[{type:"average",name:"平均值"}]}},{name:"运营里程",type:"line",borderWidth:1,color:"#009966",data:this.total_running_length,markLine:{data:[{type:"average",name:"平均值"}]}},{name:"接管次数",type:"line",fontSize:28,borderWidth:1,color:"#FF6666",data:this.total_take_over_counts,markLine:{data:[{type:"average",name:"平均值"}]}},{name:"急停次数",type:"line",borderWidth:1,color:"#FF00FF",data:this.total_emergency_stop_counts,markLine:{data:[{type:"average",name:"平均值"}]}},{name:"接管时间",type:"line",fontSize:28,borderWidth:1,color:"#CC6600",data:this.total_take_over_duration},{name:"急停时间",type:"line",borderWidth:1,color:"#6600CC",data:this.total_emergency_stop_duration}]})}},created:function(){},mounted:function(){var t=this;o.default.$on("allData",function(e){t.allData=e;for(var a=function(a){t.$nextTick(function(){this.dayData[a]=e[a].day,this.total_running_time[a]=e[a].run_time,this.total_running_length[a]=e[a].run_mileage,this.total_jira_commit_counts[a]=e[a].jira,this.total_take_over_counts[a]=e[a].takeover,this.total_emergency_stop_counts[a]=e[a].E_stop,this.total_take_over_duration[a]=e[a].takeover_time,this.total_emergency_stop_duration[a]=e[a].ES_time,this.total_fault_counts[a]=e[a].fault_counts,this.total_accident_counts[a]=e[a].accident_counts})},o=0;o<e.length;o++)a(o);t.$nextTick(function(){this.drawPie1("myChart1")})})}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echarts"},[e("div",{staticStyle:{width:"1600px",height:"600px"},attrs:{id:"myChart1"}})])}]};var l=a("VU/8")(i,r,!1,function(t){a("X0dJ")},"data-v-1fe92edc",null);e.default=l.exports}});
//# sourceMappingURL=0.17510f533342fc494bca.js.map